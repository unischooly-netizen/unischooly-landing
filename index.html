<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Unischooly – Book Your Free Trial Class</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", sans-serif; }
    body { background: #020617; color: #f9fafb; min-height: 100vh; display: flex; justify-content: center; padding: 24px 12px; }
    .page { width: 100%; max-width: 960px; background: #020617; border-radius: 20px; border: 1px solid #1f2937; box-shadow: 0 18px 45px rgba(15,23,42,0.8); padding: 20px; }
    @media (min-width: 900px) { .page { display: grid; grid-template-columns: 1.2fr 1fr; gap: 20px; } }

    .hero { padding-right: 10px; }
    .logo-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
    .logo { display: flex; align-items: center; gap: 8px; }
    .logo-mark { width: 30px; height: 30px; border-radius: 12px; background: radial-gradient(circle at 30% 0%, #f97316, #7c3aed 40%, #22c55e 80%); display: flex; align-items: center; justify-content: center; font-weight: 700; }
    .logo-text-main { font-weight: 700; font-size: 18px; }
    .logo-text-sub { font-size: 11px; color: #9ca3af; }
    .badge { font-size: 11px; padding: 4px 10px; border-radius: 999px; border: 1px solid #374151; color: #9ca3af; }

    .hero-pill { display:inline-flex; align-items:center; gap:6px; padding:4px 9px; border-radius:999px; background:rgba(16,185,129,0.1); border:1px solid rgba(34,197,94,0.7); color:#bbf7d0; font-size:11px; margin-bottom:10px; }
    .hero-title { font-size: 26px; line-height: 1.15; margin-bottom: 8px; font-weight: 800; }
    .hero-title span { color:#a5b4fc; }
    .hero-sub { font-size: 13px; color:#9ca3af; margin-bottom: 14px; max-width: 480px; }

    .meta-row { display:flex; flex-wrap:wrap; gap:8px; margin-bottom:12px; font-size:11px; }
    .meta-pill { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid #374151; background:#020617; color:#9ca3af; }

    .steps { display:flex; flex-wrap:wrap; gap:8px; font-size:11px; color:#9ca3af; margin-bottom:14px; }
    .step-chip { display:inline-flex; align-items:center; gap:6px; padding:5px 9px; border-radius:999px; border:1px solid #374151; }
    .step-num { width:16px; height:16px; border-radius:999px; background:#111827; display:flex; align-items:center; justify-content:center; font-size:10px; color:#e5e7eb; }

    .card { background:#020617; border-radius:18px; border:1px solid #374151; padding:16px; box-shadow:0 10px 30px rgba(15,23,42,0.9); }
    .card-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
    .card-title { font-size:17px; font-weight:700; }
    .card-sub { font-size:11px; color:#9ca3af; }
    .card-badge { font-size:10px; padding:4px 8px; border-radius:999px; border:1px solid rgba(56,189,248,0.8); background:rgba(8,47,73,0.8); color:#bae6fd; display:flex; align-items:center; gap:6px; }
    .card-badge-dot { width:8px; height:8px; border-radius:999px; background:#22c55e; box-shadow:0 0 8px rgba(34,197,94,0.9); }

    .tabs { display:flex; gap:6px; margin-bottom:12px; font-size:11px; }
    .tab { flex:1; padding:6px 8px; border-radius:999px; border:1px solid #374151; background:#020617; display:flex; align-items:center; justify-content:center; gap:6px; color:#9ca3af; }
    .tab.active { border-color:#6366f1; background:linear-gradient(135deg,#4f46e5,#7c3aed); color:#f9fafb; }

    .form-group { margin-bottom:8px; }
    .form-label { display:block; font-size:11px; margin-bottom:3px; }
    .form-input,
    .form-select,
    .form-textarea { width:100%; padding:8px 9px; border-radius:10px; border:1px solid #374151; background:#020617; color:#f9fafb; font-size:12px; outline:none; }
    .form-input:focus,
    .form-select:focus,
    .form-textarea:focus { border-color:#818cf8; box-shadow:0 0 0 1px rgba(129,140,248,0.5); }
    .form-textarea { resize:vertical; min-height:60px; }
    .row { display:flex; gap:8px; }
    .row > div { flex:1; }
    .phone-row { display:grid; grid-template-columns:90px minmax(0,1fr); gap:6px; }

    .radio-row { display:flex; gap:10px; font-size:11px; color:#9ca3af; margin-top:3px; }
    .radio-row label { display:flex; align-items:center; gap:4px; cursor:pointer; }

    .consent { display:flex; align-items:flex-start; gap:6px; font-size:11px; color:#9ca3af; margin-top:5px; }
    .consent input { margin-top:2px; }

    .btn { width:100%; margin-top:10px; padding:9px 10px; border-radius:999px; border:none; background:linear-gradient(120deg,#4f46e5,#8b5cf6); color:#fff; font-size:13px; font-weight:600; display:flex; align-items:center; justify-content:center; gap:7px; cursor:pointer; box-shadow:0 12px 25px rgba(79,70,229,0.7); }
    .btn:disabled { opacity:0.6; box-shadow:none; cursor:not-allowed; }

    .error { font-size:11px; color:#fecaca; margin-top:4px; }
    .success { font-size:11px; color:#bbf7d0; margin-top:4px; }

    .hidden { display:none; }
  </style>
</head>
<body>
  <div class="page">

    <!-- LEFT SIDE -->
    <div class="hero">
      <div class="logo-row">
        <div class="logo">
          <div class="logo-mark">U</div>
          <div>
            <div class="logo-text-main">Unischooly</div>
            <div class="logo-text-sub">Future-ready kids. Happy parents.</div>
          </div>
        </div>
        <div class="badge">Live 1:1 & small-group classes</div>
      </div>

      <div class="hero-pill">✨ Free trial class • Limited slots today</div>

      <h1 class="hero-title">Book a <span>Free Live Coding Class</span> for your child.</h1>
      <p class="hero-sub">
        A personalised 45–60 minute class that makes coding & future skills fun and easy for kids from Grade 1–12.
      </p>
    </div>

    <!-- RIGHT SIDE FORM -->
    <div class="card">

      <div class="tabs">
        <div id="tab1" class="tab active">1. Details</div>
        <div id="tab2" class="tab">2. Schedule</div>
      </div>

      <!-- STEP 1 -->
      <div id="step1">
        <div class="form-group">
          <label class="form-label">Child’s name</label>
          <input id="childName" class="form-input" type="text" placeholder="Enter child’s name" />
        </div>

        <div class="row">
          <div class="form-group">
            <label class="form-label">Child’s grade</label>
            <select id="childGrade" class="form-select">
              <option value="">Select grade</option>
              <option>Grade 1</option><option>Grade 2</option><option>Grade 3</option>
              <option>Grade 4</option><option>Grade 5</option><option>Grade 6</option>
              <option>Grade 7</option><option>Grade 8</option><option>Grade 9</option>
              <option>Grade 10</option><option>Grade 11</option><option>Grade 12</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Parent name</label>
            <input id="parentName" class="form-input" type="text" placeholder="Enter your name" />
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Parent email</label>
          <input id="parentEmail" class="form-input" type="email" placeholder="Enter email" />
        </div>

        <div class="form-group">
          <label class="form-label">Mobile Number</label>
          <div class="phone-row">
            <select id="phoneCode" class="form-select">
              <option value="+91">+91</option><option value="+971">+971</option>
              <option value="+974">+974</option><option value="+966">+966</option>
              <option value="+965">+965</option><option value="+968">+968</option>
              <option value="+44">+44</option><option value="+1">+1</option>
            </select>
            <input id="phoneNumber" class="form-input" type="tel" placeholder="WhatsApp number" />
          </div>
        </div>

        <button id="btnStep1" class="btn">Confirm & Continue →</button>
        <div id="msgStep1" class="error hidden"></div>
      </div>

      <!-- STEP 2 -->
      <div id="step2" class="hidden">
        <div class="form-group">
          <label class="form-label">Preferred Demo Date</label>
          <input id="preferredDate" class="form-input" type="date" />
        </div>

        <div class="form-group">
          <label class="form-label">Preferred Time Slot</label>
          <select id="preferredTime" class="form-select">
            <option value="">Select time</option>
            <option>10:00 AM – 11:00 AM</option>
            <option>11:00 AM – 12:00 PM</option>
            <option>04:00 PM – 05:00 PM</option>
            <option>05:00 PM – 06:00 PM</option>
          </select>
        </div>

        <button id="btnStep2" class="btn">Submit Booking</button>
        <div id="msgStep2" class="error hidden"></div>
        <div id="msgSuccess" class="success hidden"></div>
      </div>

    </div>
  </div>

  <!-- SUPABASE LOGIC -->
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

    const supabaseUrl = "https://binklfyiypbhuzsvnlzg.supabase.co";
    const supabaseAnonKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpbmtsZnlpeXBiaHV6c3ZubHpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMzA5NjgsImV4cCI6MjA4MDYwNjk2OH0.PYCRN7ubQA2XnVy8BYd6746iAGATjBuBAlvsCdLdbqw";

    const supabase = createClient(supabaseUrl, supabaseAnonKey);

    // UI elements
    const step1 = document.getElementById("step1");
    const step2 = document.getElementById("step2");
    const tab1 = document.getElementById("tab1");
    const tab2 = document.getElementById("tab2");

    const btnStep1 = document.getElementById("btnStep1");
    const btnStep2 = document.getElementById("btnStep2");

    let leadId = null;

    // Step 1 submit
    btnStep1.addEventListener("click", async () => {
      const childName = document.getElementById("childName").value.trim();
      const childGrade = document.getElementById("childGrade").value;
      const parentName = document.getElementById("parentName").value.trim();
      const parentEmail = document.getElementById("parentEmail").value.trim();
      const phoneCode = document.getElementById("phoneCode").value;
      const phoneNumber = document.getElementById("phoneNumber").value.trim();

      if (!childName || !childGrade || !parentName || !parentEmail || !phoneNumber) {
        document.getElementById("msgStep1").textContent = "Please fill all fields.";
        document.getElementById("msgStep1").classList.remove("hidden");
        return;
      }

      const { data, error } = await supabase
        .from("demo_leads")
        .insert([{
          child_name: childName,
          child_grade: childGrade,
          parent_name: parentName,
          parent_email: parentEmail,
          phone_country_code: phoneCode,
          phone_number: phoneNumber,
          landing_page_path: window.location.pathname,
          full_url: window.location.href
        }])
        .select("id")
        .single();

      if (error) {
        alert("Error saving details.");
        console.log(error);
        return;
      }

      leadId = data.id;

      step1.classList.add("hidden");
      step2.classList.remove("hidden");
      tab1.classList.remove("active");
      tab2.classList.add("active");
    });

    // Step 2 submit
    btnStep2.addEventListener("click", async () => {
      const preferredDate = document.getElementById("preferredDate").value;
      const preferredTime = document.getElementById("preferredTime").value;

      if (!preferredDate || !preferredTime) {
        document.getElementById("msgStep2").textContent = "Select a date & time.";
        document.getElementById("msgStep2").classList.remove("hidden");
        return;
      }

      await supabase
        .from("demo_leads")
        .update({
          preferred_date: preferredDate,
          preferred_time_slot: preferredTime
        })
        .eq("id", leadId);

      document.getElementById("msgSuccess").textContent =
        "Thank you! Your demo request has been submitted.";
      document.getElementById("msgSuccess").classList.remove("hidden");
    });

  </script>
</body>
</html>
