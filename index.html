<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Unischooly ‚Äì Book Your Free Trial Class</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Inter", sans-serif; }
    body { background: #020617; color: #f9fafb; min-height: 100vh; display: flex; justify-content: center; padding: 24px 12px; }

    .page {
      width: 100%;
      max-width: 1180px;
      background: #020617;
      border-radius: 18px;
      border: 1px solid #1f2937;
      padding: 24px;
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.7);
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 24px;
    }

    /* HERO UI */
    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(16, 185, 129, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.7);
      color: #bbf7d0;
      font-size: 12px;
      margin-bottom: 16px;
    }
    .hero-title { font-size: 32px; font-weight: 800; line-height: 1.15; margin-bottom: 10px; }
    .hero-title span { color: #a5b4fc; }
    .hero-sub { font-size: 15px; color: #9ca3af; margin-bottom: 18px; max-width: 500px; }

    .meta-row { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 18px; }
    .meta-pill {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid #374151;
      font-size: 12px;
      background: #020617;
      color: #9ca3af;
    }

    /* RIGHT FORM CARD */
    .card {
      background: #020617;
      border-radius: 18px;
      border: 1px solid #374151;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(15, 23, 42, 0.6);
    }

    .tabs { display: flex; gap: 8px; margin-bottom: 20px; }
    .tab {
      flex: 1;
      padding: 8px;
      border-radius: 999px;
      text-align: center;
      border: 1px solid #374151;
      font-size: 13px;
      background: #020617;
      color: #9ca3af;
    }
    .tab.active {
      background: linear-gradient(135deg,#4f46e5,#7c3aed);
      border-color: #6366f1;
      color: #fff;
    }

    .form-group { margin-bottom: 14px; }
    .form-label { display: block; font-size: 12px; margin-bottom: 5px; color: #cbd5e1; }
    .form-input, .form-select {
      width: 100%;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #374151;
      background: #020617;
      color: #fff;
      font-size: 14px;
      outline: none;
    }

    .btn {
      width: 100%;
      padding: 12px;
      margin-top: 10px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(120deg, #4f46e5, #8b5cf6);
      color: #fff;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 12px 25px rgba(79, 70, 229, 0.6);
    }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }

    .error { color: #fca5a5; margin-top: 6px; font-size: 13px; }
    .success { color: #bbf7d0; margin-top: 6px; font-size: 13px; }

    .hidden { display: none; }
  </style>

</head>

<body>
  <div class="page">

    <!-- LEFT HERO -->
    <div>
      <div class="hero-pill">‚ú® Free trial class ‚Ä¢ Limited slots today</div>

      <h1 class="hero-title">Book a <span>Free Live Coding Class</span> for your child.</h1>

      <p class="hero-sub">
        A personalised 45‚Äì60 minute class to introduce your child to coding, logic skills & futuristic learning.
      </p>

      <div class="meta-row">
        <div class="meta-pill">‚è± 45‚Äì60 min on Zoom</div>
        <div class="meta-pill">üë®‚Äçüè´ Top 1% vetted teachers</div>
        <div class="meta-pill">üåç Kids across India, Middle East, Europe & USA</div>
      </div>
    </div>

    <!-- RIGHT FORM -->
    <div class="card">

      <div class="tabs">
        <div id="tab-step1" class="tab active">1. Child & Parent Details</div>
        <div id="tab-step2" class="tab">2. Date & Time</div>
      </div>

      <!-- STEP 1 -->
      <div id="step1">

        <div class="form-group">
          <label class="form-label">Country</label>
          <select id="country" class="form-select">
            <option>India</option>
            <option>United Arab Emirates</option>
            <option>Saudi Arabia</option>
            <option>Qatar</option>
            <option>Kuwait</option>
            <option>Bahrain</option>
            <option>United States</option>
            <option>Canada</option>
            <option>United Kingdom</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Parent WhatsApp number</label>
          <input id="phoneNumber" class="form-input" type="tel" placeholder="Enter WhatsApp number" />
        </div>

        <div class="form-group">
          <label class="form-label">Child name</label>
          <input id="childName" class="form-input" type="text" />
        </div>

        <div class="form-group">
          <label class="form-label">Child grade</label>
          <select id="childGrade" class="form-select">
            <option>Grade 1</option><option>Grade 2</option><option>Grade 3</option><option>Grade 4</option>
            <option>Grade 5</option><option>Grade 6</option><option>Grade 7</option><option>Grade 8</option>
            <option>Grade 9</option><option>Grade 10</option><option>Grade 11</option><option>Grade 12</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">Parent name</label>
          <input id="parentName" class="form-input" type="text" />
        </div>

        <div class="form-group">
          <label class="form-label">Parent email</label>
          <input id="parentEmail" class="form-input" type="email" />
        </div>

        <button id="btnStep1" class="btn">Confirm class booking details ‚Üí</button>
        <div id="msgStep1" class="error hidden"></div>
      </div>

      <!-- STEP 2 -->
      <div id="step2" class="hidden">

        <div class="form-group">
          <label class="form-label">Preferred date</label>
          <input id="preferredDate" class="form-input" type="date" />
        </div>

        <div class="form-group">
          <label class="form-label">Preferred time</label>
          <select id="preferredTime" class="form-select">
            <option>10:00 AM ‚Äì 11:00 AM</option>
            <option>11:00 AM ‚Äì 12:00 PM</option>
            <option>04:00 PM ‚Äì 05:00 PM</option>
            <option>05:00 PM ‚Äì 06:00 PM</option>
            <option>07:00 PM ‚Äì 08:00 PM</option>
          </select>
        </div>

        <button id="btnStep2" class="btn">Submit booking ‚Üí</button>

        <div id="msgStep2" class="error hidden"></div>
        <div id="msgSuccess" class="success hidden"></div>
      </div>

    </div>
  </div>

  <!-- ========================= -->
  <!-- üöÄ WORKING SUPABASE LOGIC -->
  <!-- ========================= -->
  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

    const supabase = createClient(
      "https://binklfyiypbhuzsvnlzg.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJpbmtsZnlpeXBiaHV6c3ZubHpnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMzA5NjgsImV4cCI6MjA4MDYwNjk2OH0.PYCRN7ubQA2XnVy8BYd6746iAGATjBuBAlvsCdLdbqw"
    );

    const step1 = document.getElementById("step1");
    const step2 = document.getElementById("step2");
    const tab1 = document.getElementById("tab-step1");
    const tab2 = document.getElementById("tab-step2");

    function showStep(n) {
      if (n === 1) {
        step1.classList.remove("hidden");
        step2.classList.add("hidden");
        tab1.classList.add("active");
        tab2.classList.remove("active");
      } else {
        step1.classList.add("hidden");
        step2.classList.remove("hidden");
        tab1.classList.remove("active");
        tab2.classList.add("active");
      }
    }

    let leadId = null;

    // STEP 1 SUBMIT
    document.getElementById("btnStep1").onclick = async () => {
      const childName = document.getElementById("childName").value.trim();
      const parentName = document.getElementById("parentName").value.trim();
      const parentEmail = document.getElementById("parentEmail").value.trim();
      const phone = document.getElementById("phoneNumber").value.trim();
      const grade = document.getElementById("childGrade").value;

      const msg = document.getElementById("msgStep1");

      if (!childName || !parentName || !parentEmail || !phone) {
        msg.textContent = "Please fill all fields.";
        msg.classList.remove("hidden");
        return;
      }

      const { data, error } = await supabase
        .from("demo_leads")
        .insert([{ child_name: childName, child_grade: grade, parent_name: parentName, parent_email: parentEmail, phone_number: phone }])
        .select("id")
        .single();

      if (error) {
        msg.textContent = "Error saving details.";
        msg.classList.remove("hidden");
        return;
      }

      leadId = data.id;
      showStep(2);
    };

    // STEP 2 SUBMIT
    document.getElementById("btnStep2").onclick = async () => {
      const date = document.getElementById("preferredDate").value;
      const time = document.getElementById("preferredTime").value;
      const msg = document.getElementById("msgStep2");
      const success = document.getElementById("msgSuccess");

      if (!date || !time) {
        msg.textContent = "Please select a date and time.";
        msg.classList.remove("hidden");
        return;
      }

      const { error } = await supabase
        .from("demo_leads")
        .update({ preferred_date: date, preferred_time_slot: time })
        .eq("id", leadId);

      if (error) {
        msg.textContent = "Error submitting booking.";
        msg.classList.remove("hidden");
        return;
      }

      success.textContent = "Booking submitted successfully!";
      success.classList.remove("hidden");
    };
  </script>

</body>
</html>
